<SPConfig xmlns="urn:mace:shibboleth:3.0:native:sp:config"
    xmlns:conf="urn:mace:shibboleth:3.0:native:sp:config"
    logger="syslog.logger">

  <ApplicationDefaults
      entityID="https://localhost/shibboleth"
      REMOTE_USER="eppn persistent-id targeted-id">

    <Sessions
        lifetime="28800"
        timeout="3600"
        relayState="ss:mem"
        handlerURL="/Shibboleth.sso"
        cookieProps="https">

      <!-- EDS / Discovery -->
      <SSO
          discoveryProtocol="SAMLDS"
          discoveryURL="https://localhost/shibboleth-ds/">
        SAML2
      </SSO>

      <Handler type="MetadataGenerator" Location="/Metadata" signing="false"/>
      <Handler type="Status" Location="/Status"/>
      <Handler type="Session" Location="/Session" showAttributeValues="true"/>
      <Handler type="DiscoveryFeed" Location="/DiscoFeed"/>
    </Sessions>

    <!-- eduGAIN metadata (downloaded/cached by entrypoint) -->
    <MetadataProvider type="XML"
                  path="/etc/shibboleth/metadata/edugain-v2.xml"
                  reloadInterval="7200">
    
      <MetadataFilter type="Include">
        <Include>https://idp-serv.uni-magdeburg.de/idp/shibboleth</Include>
        <Include>urn:mace:cru.fr:federation:univ-angers.fr</Include>
        <Include>https://www.rediris.es/sir/unexidp</Include>
        <Include>https://aai.uevora.pt/idp/shibboleth</Include>
        <Include>https://idp.uoradea.ro/idp/shibboleth</Include>
        <Include>https://idp3.hig.se/idp/shibboleth</Include>
        <Include>https://shib.upwr.edu.pl/idp/shibboleth</Include>
        <Include>https://idp.atu.ie/idp/shibboleth</Include>
        <Include>https://shibidp.unipr.it/idp/shibboleth</Include>
      </MetadataFilter>
    </MetadataProvider>


    <AttributeExtractor type="XML" validate="true" path="attribute-map.xml"/>
    <AttributeResolver type="Query"/>

    <CredentialResolver type="File"
        key="/etc/shibboleth/sp-key.pem"
        certificate="/etc/shibboleth/sp-cert.pem"/>

  </ApplicationDefaults>

  <SecurityPolicyProvider type="XML" validate="true"
      path="security-policy.xml"/>

  <ProtocolProvider type="XML" validate="true"
      path="protocols.xml"/>
</SPConfig>
